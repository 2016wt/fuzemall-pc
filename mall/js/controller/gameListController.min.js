/*! touch 2016-11-04 */
define(function(){return function(a,b){$("#container").loadPage(a,["css/slide.css","css/gameList.css","css/pagination.css"],function(){function a(a,b,c){$(".gamelist_loading").show(),$(".look_all").hide(),Game.getGameListByCategory({page:a,pagesize:b},function(a){$(".gamelist_loading").hide(),$(".look_all").show(),(a.code=200)?(console.log(a),(a.data.list.length<20||a.data.totalNum<=20)&&$(".look_all").hide(),c?$("#game_List").html($("#gameListTemplate").tmpl({list:a.data.list})):$("#gameListTemplate").tmpl({list:a.data.list}).appendTo($("#game_List"))):$.alertTmpMsg(a.message)})}function b(){$(".keyword").hide(),$(".game_toptit input[type='text']").val(""),a("1","20",!0)}$(".look_all").on("click",function(){var b=$(this).data("page");b++,$(this).data("page",b),a(b,"20")}),$("#game_List").on("click",".gamelist_con",function(){window.open("#gameItem/"+$(this).data("gid"))}),$(".game_toptit a").on("click",function(){$(".game_selectbox .active").removeClass("active"),$(".game_selectbox .select_span").eq(0).addClass("active");var a=$.trim($(".game_toptit input[type='text']").val());a&&($(".keyword").show().find("span").text('"'+a+'"'),$(".game_list").addClass("loading").html(""),Goods.gameSearch({keyword:a},function(b){$(".look_all").hide(),$(".gamelist_loading").hide(),200==b.code?($(".look_all").hide(),b.data.list&&b.data.list.length>0?$("#game_List").html($("#gameListTemplate").tmpl({list:b.data.list})):$("#game_List").html('<div class="empty_list">抱歉，没有找到“<span style="color:#23aeb3;">'+a+"</span>”的搜索结果。</div>")):$.alertTmpMsg(b.message)}))}),$(".keyword a").on("click",function(){b()}),$(".game_list").on("click",".gamelist_con img",function(){window.open("#gameItem/"+$(this).data("gid"))}),search_keyword?($(".game_toptit input[type='text']").val(search_keyword),search_keyword="",$(".game_toptit a").trigger("click")):a("1","20",!1)})}});