/*! touch 2016-09-13 */
define(function(){var a={addAddress:function(a){var b={};b.title="添加新地址",b.content=$("#regionTemplate").tmpl({address_name:"",address_phone:"",address_detail:""}),b.width=650;var c=this;$.alertPop(b,function(){new PCAS("province","city","area"),$("#address_name").focus(),$("#save_addr").off().on("click",function(){if(!(c.checkName()&&c.checkRegion()&&c.checkAddrDetail()&&c.checkTel()))return!1;var b={};b.address_name=$("#address_name").val(),b.address_province=$("#address_province").val(),b.address_city=$("#address_city").val(),b.address_region=$("#address_area").val(),b.address_phone=$("#address_phone").val(),b.address_detail=$("#address_detail").val(),b.address_default=1&$(".region_default p").hasClass("active"),Center.addAddress({data:b},function(b){var c=b.code;"200"==c?a&&a(b):$.alertTmpMsg(b.message),$.closePop()})})}),$(".region_default p").off().on("click",function(){$(this).toggleClass("active")})},editAddress:function(a,b){var c={};c.title="编辑地址",c.content=$("#regionTemplate").tmpl(a.data),c.width=650;var d=this;$.alertPop(c,function(){new PCAS("province","city","area",a.data.address_province,a.data.address_city,a.data.address_region),$("#save_addr").off().on("click",function(){if(d.checkName()&&d.checkRegion()&&d.checkAddrDetail()&&d.checkTel()){var a={};a.address_name=$("#address_name").val(),a.address_province=$("#address_province").val(),a.address_city=$("#address_city").val(),a.address_region=$("#address_area").val(),a.address_phone=$("#address_phone").val(),a.address_detail=$("#address_detail").val(),a.address_default=1&$(".region_default p").hasClass("active"),Center.editAddress({id:$(this).data("id"),data:a},function(a){"200"==a.code&&(b&&b(a),$.closePop())})}})}),$(".region_default p").off().on("click",function(){$(this).toggleClass("active")})},checkName:function(){var a=$.trim($("#address_name").val());if(""==a)return $("#address_name").parent().find(".errmsg").html("请输入收货人姓名").css("display","inline-block"),!1;var b=/[\?\~\!@#\$%\^&\*-\/\+\\\$\.\;\<\>\"\=\{\}\']/;return b.test(a)?($("#address_name").parent().find(".errmsg").html("收货人姓名不能含有非法字符").css("display","inline-block"),!1):!0},checkRegion:function(){var a=$("#address_province").val(),b=$("#address_city").val(),c=$("#address_area").val();return a&&b&&c?!0:($("#address_province").parent().find(".errmsg").html("请选择收货地区").css("display","inline-block"),!1)},checkAddrDetail:function(){var a=$.trim($("#address_detail").val());if(""==a)return $("#address_detail").parent().find(".errmsg").html("请填写详细地址").css("display","inline-block"),!1;var b=/[\?\~\!@#\$%\^&\*-\/\+\\\$\.\;\<\>\"\=\{\}\']/;return b.test(a)?($("#address_detail").parent().find(".errmsg").html("详细地址不能含有非法字符").css("display","inline-block"),!1):!0},checkTel:function(){var a=$.trim($("#address_phone").val());return $.checkTel(a)?!0:($("#address_phone").parent().find(".errmsg").html("请填写有效的手机号").css("display","inline-block"),!1)}};return $("body").on("blur","#address_name",function(){a.checkName()}).on("input","#address_name",function(){$(this).parent().find(".errmsg").hide()}),$("body").on("blur","#address_area",function(){a.checkRegion()}).on("input","#address_area",function(){$(this).parent().find(".errmsg").hide()}),$("body").on("blur","#address_detail",function(){a.checkAddrDetail()}).on("input","#address_detail",function(){$(this).parent().find(".errmsg").hide()}),$("body").on("blur","#address_phone",function(){a.checkTel()}).on("input","#address_phone",function(){$(this).parent().find(".errmsg").hide()}),a});