/*! touch 2016-09-13 */
define(function(){return function(a,b){$("#container").loadPage(a,["css/serviceCenter.css"],function(){var a={};$.extend(a,{data:{getHotIssueParams:{len:6},getMyIssueParams:{page:1,len:5,status:0}},init:{initData:function(){a.post.postHotIssue(),a.post.postMyIssue(),$(".sc-con").on("click",".sc-question-state a",a.func.cutMyIssueState),$("#myIssueList").on("click","a",a.func.goMyIssueDetails),$("#hotIssueList").on("click","a",a.func.postHotIssueResult),$("#goToMessage").on("click",a.func.goToCreateMessage)}},post:{postHotIssue:function(){Serve.getHotIssueList(a.data.getHotIssueParams,function(a){200==a.code&&($(".sc-hotIssue-load").hide(),$("#hotIssueList").html($("#hotIssueTem").tmpl(a)))})},postMyIssue:function(){null!=$.getCookie("username")&&""!=$.getCookie("username")?($(".sc-myIssue-noneLogin").hide(),$(".sc-myIssue-doneLogin").show(),Serve.getMyIssueList(a.data.getMyIssueParams,function(b){200==b.code&&a.func.initPagination(b.total)})):($(".sc-myIssue-noneLogin").show(),$(".sc-myIssue-doneLogin").hide())}},func:{cutMyIssueState:function(){var b=$(this),c=b.attr("issue-status"),d=b.parents("ul").find("a");d.removeClass("choo"),b.addClass("choo"),$(".sc-myIssue-load").show(),$("#myIssueList").hide(),a.data.getMyIssueParams.status=c,a.data.getMyIssueParams.page=1,a.post.postMyIssue()},goMyIssueDetails:function(){var a=$(this),b=a.parent().attr("id");location.hash="#messageDetails/"+b},initPagination:function(b){require(["plugins/jquery.pagination.js"],function(){function c(b){var c=$("span[class = 'current'][class != 'prev'][class != 'next']").text();a.data.getMyIssueParams.page=c,Serve.getMyIssueList(a.data.getMyIssueParams,function(a){200==a.code&&($("#pagination").show(),$(".sc-myIssue-load").hide(),$("#myIssueList").show(),$("#myIssueList").html($("#myIssueTem").tmpl(a)),0==a.list.length&&$("#pagination").hide())})}$("#pagination").pagination(b,{num_edge_entries:1,num_display_entries:4,current_page:a.data.getMyIssueParams.page-1,link_to:"javascript:",callback:c,items_per_page:a.data.getMyIssueParams.len,prev_text:"上一页",next_text:"下一页"})})},postHotIssueResult:function(){var a=$(this),b=a.attr("data-state"),c=a.next();$("#hotIssueList").find(".sc-hotIssue-result");a.parent().siblings().find("a").attr("data-state","0").next().slideUp(100),0==b?(c.slideDown(100),a.attr("data-state","1")):(c.slideUp(100),a.attr("data-state","0"))},goToCreateMessage:function(){null!=$.getCookie("username")&&""!=$.getCookie("username")?location.href="index.html#createMessage":$.alertTmpMsg("请先登录哦！")}}}),a.init.initData()})}});