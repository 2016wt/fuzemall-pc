/*! touch 2016-09-13 */
define(function(){return function(a,b){var c=8;b.status=b.pIndex?b.pIndex:0,$("#center_right").addClass("r_loading").loadPage(a,["css/mycenter/myorder.css"],function(){function a(a){$("#Pagination").hide(),Center.getOrderList({status:a},function(a){$("#center_right").removeClass("r_loading"),$.extend(!0,d,a);for(var b=a.list,e=[];b.length>0;)e.push({sublist:b.splice(0,c)});$("#hiddenresult").html($("#orderListTemplate").tmpl({list:e})),require(["http://cdn.fuzeuser.com/plugins/jquery.pagination/jquery.pagination.js"],function(){function a(a,b){var c=$("#hiddenresult div.pg_result:eq("+a+")").clone();return 0==c.length?($(".c_order_content_ul").empty().append('<div class="empty_list">您暂无订单记录,快去<a>选购</a>吧。</div>'),$("#Pagination").hide()):($("#Pagination").show(),$(".c_order_content_ul").empty().append(c)),!1}(function(){var b=e.length;$("#Pagination").pagination(b,{num_edge_entries:1,num_display_entries:4,callback:a,items_per_page:1,prev_text:"上一页",next_text:"下一页"})})()})})}$("#myorder .news_contit dd a").eq(b.status).addClass("active");var d={};a(b.status),$("#myorder .news_contit dd a").on("click",function(){$("#myorder .news_contit dd a.active").removeClass("active"),$(this).addClass("active"),$(".c_order_content_ul").html(""),$("#center_right").addClass("r_loading"),a($(this).data("status"))}),$("#center_right").on("click",".c_order_thumbs li",function(){$.goPage("item/"+$(this).data("gid"))}),$("#center_right").on("click",".c_order_qfk",function(){$.goPage("pay/"+$(this).data("id"))}),$("#center_right").on("click",".c_order_qxdd",function(){var a={};a.content=$("#cancelPopTemplate").tmpl({}),a.width=560;var b=$(this);$.alertPop(a,function(){$(".cancle_no").on("click",function(){$("#global_pop").hide()}),$(".cancle_ok").on("click",function(){$("#global_pop").hide();var a=$(".cancelPopUl .item input[type='radio']:checked").parent().text(),c=$.trim($(".cancel_textarea").val());Center.cancelOrder({order_id:b.data("id"),reason:a,desc:c},function(a){200==a.code?loadSubPage("myorder"):$.alertTmpMsg(a.message)})})})}),$("#center_right").on("click",".c_order_sqtk",function(){var a={};a.content=$("#deleteWarnTemplate").tmpl({msg:"你确定要退款吗？"}),a.width=400;var b=$(this);$.alertPop(a,function(){$(".dl_cancel").on("click",function(){$("#global_pop").hide()}),$(".dl_ok").on("click",function(){Center.applyRefund({order_id:b.data("id")},function(a){200==a.code?(b.hide(),$.alertTmpMsg("已提交退款申请"),b.parents("li").find(".sqtk_info").text("退款审核中...")):$.alertTmpMsg(a.message),$("#global_pop").hide()})})})}),$("#center_right").on("click",".c_order_no span a,.c_order_ddxq",function(){location.hash="#mycenter/orderDetail?pIndex="+$(this).data("id")}),$("#center_right").on("click",".c_order_sqsh",function(){var a=$(this).data("no"),b=d.list[$.getObjIndexByKey(d.list,"order_no",a)],c={};c.width=550,c.content=$("#returnPopTemplate").tmpl(b),$.alertPop(c,function(){$(".returnPopUl li .ckxq").on("click",function(){return $(this).hasClass("disable")?!1:($.closePop(),void(location.hash="#mycenter/returnDetail?pIndex="+$(this).data("gid")+"_"+$(this).data("id")+"_"+$(this).data("flag")))})})}),$("#center_right").on("click",".c_order_qrsh",function(){var a=$(this);Center.orderComplete({order_id:a.data("id")},function(b){200==b.code?(a.hide().parents("li").find(".c_order_status").html("已完成"),$.alertTmpMsg("已确认成功。"),$(".c_order_sqsh").parent().show(),$(".c_order_ckwl").parent().hide()):$.alertTmpMsg(b.message)})}),$("#center_right").on("click",".c_order_ckwl",function(){$.goPage("#mycenter/express?pIndex=1_"+$(this).data("id"))})})}});