/*! touch 2016-09-13 */
define(function(){return function(a,b){$("#container").loadPage(a,["css/game.css"],function(){var a=(document.documentElement.clientWidth||document.body.clientWidth||document.body.scrollWidth,document.documentElement.clientHeight||document.body.clientHeight||document.body.scrollHeight,null);$.fn.slider=function(b){b=$.extend({timeout:3e3,moveTime:800,autoSlider:!1,imgNum:3},b||{}),b.timeout=b.timeout<1500?1500:b.timeout,b.moveTime=b.moveTime<500?500:b.moveTime,b.autoSlider="boolean"!=typeof b.autoSlider?!0:b.autoSlider;var c=this,d=c.find(".js_slider"),e=d.find("a"),f=e[0].clientWidth||e[0].scrollWidth,g=Math.ceil(e.size()/b.imgNum),h=c.find(".js_slider_tips"),i=c.find(".js_slider_handle"),j=0,k=!0,l=function(){m(),q(),p(),i.on("click",function(){q();var a=i.index($(this));k=0==a?!1:!0,n()}),h.on("click","li",function(){q();var a=h.find("li").index($(this));j=a,o(j),p()})},m=function(){d.width(f*e.size());for(var a=0;g>a;a++)h.append("<li>"),0==a&&h.find("li").eq(a).addClass("active")},n=function(){k?(j++,j=j==g?0:j):(j--,j=-1==j?g-1:j),o(j),p()},o=function(a){d.stop(!0,!0).animate({left:-1*a*(f*b.imgNum)},b.moveTime),h.find("li").removeClass("active").eq(a).addClass("active")},p=function(){k=!0,1==b.autoSlider&&(a&&clearTimeout(a),a=setTimeout(n,b.timeout))},q=function(){a&&clearTimeout(a)};l()},Game.getRecommendList("",function(a){200==a.code&&($("#gameRecommend").html($("#gameRecommendTem").tmpl(a)),$(".game-slider").slider())}),Game.getStartingList("",function(a){200==a.code&&$("#gameStarting").html($("#gameStartingTem").tmpl(a))}),$(".JS_gameItem").on("click","a",function(){var a=$(this),b=a.attr("id");window.open("#gameItem/"+b)}),$("#gameMore").on("click",function(){a&&clearTimeout(a),bannerTimer&&clearInterval(bannerTimer),window.location.href="#gameList"}),$(".game-banner").bannerSlider()})}});